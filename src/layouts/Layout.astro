---
const {
  title = "Space for Neurodiversity",
  description = "Space for Neurodiversity advances inclusion, awareness, and meaningful participation of neurodivergent individuals in the space sector. We combine research, advocacy, and community engagement to create more inclusive workplaces, policies, and opportunities across the industry.",
  bodyClass
} = Astro.props;

import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Scripts from '../components/Scripts.astro';
---
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{title}</title>
  <meta name="description" content={description}>
  <meta name="keywords" content="space, sustainability, digital marketing, professional development, workshops, masterclasses">

  <!-- Favicons -->
  <link href="/img/favicon.png" rel="icon">
  <link href="/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS -->
  <link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="/vendor/aos/aos.css" rel="stylesheet">
  <link href="/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS -->
  <link href="/styles/global.css" rel="stylesheet">

  <!-- Silktide Cookie Consent CSS -->
  <link href="/cookie-banner/silktide-consent-manager.css" rel="stylesheet">
</head>

<body class={bodyClass ?? "index-page"}>
  <!-- Header -->
  <Header />

  <!-- Main content -->
  <main class="main">
    <slot />
  </main>

  <!-- Footer -->
  <Footer />

  <!-- JS Scripts -->
  <Scripts />

  <!-- Silktide Cookie Consent JS -->
  <script type="module" src="/cookie-banner/silktide-consent-manager.js"></script>
  <script type="module">
    import '/cookie-banner/silktide-consent-manager.js';

    window.addEventListener('load', () => {
      if (!window.silktideCookieBannerManager) return;

      window.dataLayer = window.dataLayer || [];

      silktideCookieBannerManager.updateCookieBannerConfig({
        background: { showBackground: true },
        cookieIcon: { position: 'bottomLeft' },
        cookieTypes: [
          {
            id: 'necessary',
            name: 'Necessary',
            required: true,
            description:
              '<p>These cookies are required for the site to function and cannot be switched off.</p>'
          },
          {
            id: 'analytics',
            name: 'Analytics',
            defaultValue: true,
            description:
              '<p>These cookies help us understand how the site is used so we can improve it.</p>',
            onAccept: () => {
              if (window.gtag) gtag('consent', 'update', { analytics_storage: 'granted' });
              dataLayer.push({ event: 'consent_accepted_analytics' });
            },
            onReject: () => {
              if (window.gtag) gtag('consent', 'update', { analytics_storage: 'denied' });
            }
          },
          {
            id: 'advertising',
            name: 'Advertising',
            description:
              '<p>These cookies support enhanced features and personalisation.</p>',
            onAccept: () => {
              if (window.gtag)
                gtag('consent', 'update', {
                  ad_storage: 'granted',
                  ad_user_data: 'granted',
                  ad_personalization: 'granted'
                });
            },
            onReject: () => {
              if (window.gtag)
                gtag('consent', 'update', {
                  ad_storage: 'denied',
                  ad_user_data: 'denied',
                  ad_personalization: 'denied'
                });
            }
          }
        ],
        text: {
          banner: {
            description:
              '<p>We use cookies to enhance your experience and analyse site usage. <a href="/cookie-policy" target="_blank" rel="noopener">Cookie policy</a>.</p>',
            acceptAllButtonText: 'Accept all',
            rejectNonEssentialButtonText: 'Reject non-essential',
            preferencesButtonText: 'Preferences'
          },
          preferences: {
            title: 'Customise your cookie preferences',
            description:
              '<p>You can choose which types of cookies you allow. Your choices apply across the site.</p>'
          }
        }
      });
    });
  </script>
</body>

</html>